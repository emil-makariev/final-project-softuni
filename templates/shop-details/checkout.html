{% extends 'base.html' %}

{% block content %}
    <section class="breadcrumb-option">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumb__text">
                        <h4>Check Out</h4>
                        <div class="breadcrumb__links">
                            <a href="{% url 'common' %}">Home</a>
                            <a href="{% url 'all-products' %}">Shop</a>
                            <span>Check Out</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Breadcrumb Section End -->

    <!-- Checkout Section Begin -->
    <section class="checkout spad">
        <div class="container">
            <div class="checkout__form">
                <form method="POST" action="{% url 'check_out' view.request.user.id %}">
                    {% csrf_token %}
                    <div class="row">
                        <div class="col-lg-8 col-md-6">
                            <h6 class="checkout__title">Billing Details</h6>
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="checkout__input">
                                        <p>Fist Name</p>
                                        {{ form.first_name }}
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="checkout__input">
                                        <p>Last Name</p>
                                        {{ form.last_name }}
                                    </div>
                                </div>
                            </div>
                            <div class="checkout__input">
                                <p>Country</p>
                                {{ form.country }}
                            </div>
                            <div class="checkout__input">
                                {{ form.address }}
                                <input type="text" placeholder="Apartment, suite, unite ect (optinal)">
                            </div>
                            <div class="checkout__input">
                                <p>Town/City</p>
                                {{ form.city }}
                            </div>
                            <div class="checkout__input">
                                <p>Country/State</p>
                                {{ form.postal_code }}
                            </div>
                            <div class="checkout__input">
                                <p>Postcode/ZIP</p>
                                <input type="text">
                            </div>
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="checkout__input">
                                        <p>Phone</p>
                                        {{ form.phone_number }}
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="checkout__input">
                                        <p>Email</p>
                                        {{ form.email }}
                                    </div>
                                </div>
                            </div>
{#                            <div class="checkout__input">#}
{#                                <p>Account Password</p>#}
{#                                {{ form.account_password }}#}
{#                            </div>#}
                            <div class="checkout__input">
                                {{ form.order_notes }}
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6">
                            <div class="checkout__order">
                                <h4 class="order__title">Your order</h4>
                                <div class="checkout__order__products">Product <span>Total</span></div>
                                <ul class="checkout__total__products">
                                    {% for category, sizes in grouped_items.items %}
                                        {% for size, item in sizes.items %}
                                            <li>
                                                {% if category != 'accessories' %}
                                                    {{ forloop.counter }}. {{ item.product.name }} ({{ size }} size)
                                                    <span>${{ item.total_price|floatformat:2 }} (x{{ item.quantity }})</span>
                                                {% else %}
                                                    {{ forloop.counter }}. {{ item.product.name }}
                                                    <span>${{ item.total_price|floatformat:2 }} (x{{ item.quantity }})</span>
                                                {% endif %}
                                            </li>
                                        {% endfor %}
                                    {% endfor %}
                                </ul>
                                <ul class="checkout__total__all">
                                    <li>Total <span>${{total_price_for_same_products|floatformat:2 }}</span></li>
                                </ul>

                                <p>Lorem ipsum dolor sit amet, consectetur adip elit, sed do eiusmod tempor incididunt
                                ut labore et dolore magna aliqua.</p>

                                <div class="checkout__input__checkbox">
                                    <!-- Checkbox, if any -->
                                </div>
                                <button type="submit" class="site-btn">PLACE ORDER</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </section>
{% endblock %}